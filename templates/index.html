<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grand Palace Hotel Booking</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
font-family:Arial;
margin:0;
padding:0;
background:black;
color:white;
text-align:center;
}

.container{
margin-top:80px;
}

input{
padding:10px;
margin:5px;
border-radius:8px;
border:none;
width:200px;
color:black;
}

button{
background:#DAA520;
padding:10px 20px;
border-radius:10px;
color:white;
border:none;
cursor:pointer;
}

button:hover{
background:#b8911a;
}
</style>

</head>

<body>

<div class="container">

<h1>Grand Palace Hotel</h1>

<!-- LOGIN -->

<div id="loginBox">
<input id="username" placeholder="Username"><br>
<input id="password" type="password" placeholder="Password"><br>
<button onclick="login()">Login</button>
<p id="msg"></p>
</div>

<!-- DASHBOARD -->

<div id="dashboard" style="display:none">
<h2>Dashboard Connected Successfully ðŸŽ‰</h2>
<p>Your Flask API is running on Render</p>
<button onclick="loadHotels()">Test Database</button>
<pre id="data"></pre>
</div>

</div>

<script>

/* AUTO DETECT LOCAL OR ONLINE */
const API_BASE =
(location.hostname==="127.0.0.1"||location.hostname==="localhost")
?"http://127.0.0.1:5000"
:location.origin;

/* LOGIN */
async function login(){
const username=document.getElementById("username").value;
const password=document.getElementById("password").value;

try{
const res=await fetch(`${API_BASE}/login`,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({username,password})
});

const data=await res.json();

if(data.success){
document.getElementById("loginBox").style.display="none";
document.getElementById("dashboard").style.display="block";
}else{
document.getElementById("msg").innerText="Wrong username or password";
}

}catch(e){
document.getElementById("msg").innerText="Server not reachable";
}
}

/* TEST DATABASE */
async function loadHotels(){
try{
const res=await fetch(`${API_BASE}/hotels`);
const data=await res.json();
document.getElementById("data").innerText=JSON.stringify(data,null,2);
}catch(e){
document.getElementById("data").innerText="Database API not responding";
}
}

</script>

</body>
</html>
